openapi: 3.0.3
info:
  title: Campus Event Calendar API
  version: 1.0.0
servers:
  - url: /api/v1

tags:
  - name: Auth
  - name: Users
  - name: Preference
  - name: Categories
  - name: Events
  - name: Bookmarks
  - name: Memos
  - name: Tags
  - name: Timetables
  - name: Courses

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # ---------------- Common ----------------
    ErrorResponse:
      type: object
      required: [code, message]
      properties:
        code: { type: string }
        message: { type: string }

    PageMeta:
      type: object
      required: [page, size, total]
      properties:
        page: { type: integer, minimum: 1, example: 1 }
        size: { type: integer, minimum: 1, example: 20 }
        total: { type: integer, minimum: 0, example: 123 }

    # ---------------- Auth / User DTOs (Preference 폴더에 있더라도 이름 유지) ----------------
    RegisterRequest:
      type: object
      required: [email, password]
      properties:
        email: { type: string, format: email }
        password: { type: string, minLength: 8 }
        username: { type: string, nullable: true }

    RegisterResponse:
      type: object
      required: [accessToken]
      properties:
        accessToken: { type: string }
        refreshToken: { type: string, nullable: true }

    LoginRequest:
      type: object
      required: [email, password]
      properties:
        email: { type: string, format: email }
        password: { type: string }

    LoginResponse:
      type: object
      required: [accessToken]
      properties:
        accessToken: { type: string }
        refreshToken: { type: string, nullable: true }

    SocialRegisterRequest:
      type: object
      required: [provider, idToken]
      properties:
        provider:
          type: string
          enum: [LOCAL, GOOGLE, KAKAO, NAVER]
        idToken:
          type: string
          description: "provider에서 받은 idToken 또는 accessToken"
        username:
          type: string
          nullable: true
        email:
          type: string
          format: email
          nullable: true

    GetMeResponse:
      type: object
      required: [id]
      properties:
        id: { type: integer, format: int64 }
        username: { type: string, nullable: true }
        email: { type: string, format: email, nullable: true }
        profileImageUrl: { type: string, nullable: true }

    # ---------------- Categories ----------------
    CategoryGroupDto:
      type: object
      required: [id, name, sortOrder]
      properties:
        id: { type: integer, format: int64 }
        name: { type: string }
        sortOrder: { type: integer }

    CategoryDto:
      type: object
      required: [id, groupId, name, sortOrder]
      properties:
        id: { type: integer, format: int64 }
        groupId: { type: integer, format: int64 }
        name: { type: string }
        sortOrder: { type: integer }

    CategoryResponse:
      type: object
      required: [group, categories]
      properties:
        group: { $ref: '#/components/schemas/CategoryGroupDto' }
        categories:
          type: array
          items: { $ref: '#/components/schemas/CategoryDto' }

    # ---------------- Preference ----------------
    AddExcludedKeywordRequest:
      type: object
      required: [keyword]
      properties:
        keyword: { type: string, minLength: 1 }

    ListExcludedKeywordResponse:
      type: object
      required: [items]
      properties:
        items:
          type: array
          items:
            type: object
            required: [id, keyword, createdAt]
            properties:
              id: { type: integer, format: int64 }
              keyword: { type: string }
              createdAt: { type: string, format: date-time }

    AddInterestCategoryRequest:
      type: object
      required: [categoryId]
      properties:
        categoryId: { type: integer, format: int64 }

    UpdateInterestCategoryRequest:
      type: object
      required: [sortOrder]
      properties:
        sortOrder:
          type: integer
          description: "관심 카테고리 내 우선순위(옵션). 지금 안 쓰면 무시 가능"

    ListInterestCategoryResponse:
      type: object
      required: [items]
      properties:
        items:
          type: array
          items: { $ref: '#/components/schemas/CategoryDto' }

    # ---------------- Events ----------------
    EventDto:
      type: object
      required: [id, title, applyCount]
      properties:
        id: { type: integer, format: int64 }
        title: { type: string }
        imageUrl: { type: string, nullable: true }
        operationMode: { type: string, nullable: true }

        statusId: { type: integer, format: int64, nullable: true }
        eventTypeId: { type: integer, format: int64, nullable: true }
        orgId: { type: integer, format: int64, nullable: true }

        applyStart: { type: string, format: date-time, nullable: true }
        applyEnd: { type: string, format: date-time, nullable: true }
        eventStart: { type: string, format: date-time, nullable: true }
        eventEnd: { type: string, format: date-time, nullable: true }

        capacity: { type: integer, nullable: true }
        applyCount: { type: integer, example: 0 }

        organization: { type: string, nullable: true }
        location: { type: string, nullable: true }
        applyLink: { type: string, nullable: true }

        # preference 적용 결과(서버가 계산해서 내려주면 프론트가 쉬움)
        isInterested:
          type: boolean
          description: "관심 카테고리 매칭 여부(로그인+usePreferences=true일 때만 의미)"
        priorityScore:
          type: integer
          description: "정렬 우선순위 점수(옵션). RECOMMENDED 정렬에서 사용 가능"
        interestMatchedGroupIds:
          type: array
          items: { type: integer, format: int64 }
          description: "매칭된 관심 카테고리 그룹 id 목록(옵션)"

    EventFilterRequest:
      type: object
      properties:
        # 그룹별 필터(각 0~1개)
        statusId: { type: integer, format: int64, nullable: true }
        eventTypeId: { type: integer, format: int64, nullable: true }
        orgId: { type: integer, format: int64, nullable: true }

        q:
          type: string
          nullable: true
          description: "title/organization 등 검색 키워드"

        # 기간 필터(옵션)
        from: { type: string, format: date, nullable: true }
        to: { type: string, format: date, nullable: true }
        applyFrom: { type: string, format: date, nullable: true }
        applyTo: { type: string, format: date, nullable: true }

        sort:
          type: string
          enum: [EVENT_START_ASC, EVENT_START_DESC, APPLY_END_ASC, APPLY_END_DESC, RECOMMENDED]
          nullable: true
          description: "RECOMMENDED면 관심 카테고리 우선 정렬 등 적용 가능"
        usePreferences:
          type: boolean
          nullable: true
          default: true
          description: "로그인 시 제외키워드/관심카테고리 적용 여부"

    MonthEventResponse:
      type: object
      required: [range, byDate]
      properties:
        range:
          type: object
          required: [from, to]
          properties:
            from: { type: string, format: date }
            to: { type: string, format: date }
        byDate:
          type: object
          additionalProperties:
            type: object
            required: [total, preview]
            properties:
              total: { type: integer }
              preview:
                type: array
                items: { $ref: '#/components/schemas/EventDto' }

    DayEventResponse:
      allOf:
        - $ref: '#/components/schemas/PageMeta'
        - type: object
          required: [date, items]
          properties:
            date: { type: string, format: date }
            items:
              type: array
              items: { $ref: '#/components/schemas/EventDto' }

    ListEventResponse:
      allOf:
        - $ref: '#/components/schemas/PageMeta'
        - type: object
          required: [items]
          properties:
            items:
              type: array
              items: { $ref: '#/components/schemas/EventDto' }

    DetailEventResponse:
      allOf:
        - $ref: '#/components/schemas/EventDto'
        - type: object
          required: [isBookmarked]
          properties:
            isBookmarked: { type: boolean }
            bookmarkCount: { type: integer, nullable: true }

    BookmarkedEventResponse:
      allOf:
        - $ref: '#/components/schemas/PageMeta'
        - type: object
          required: [items]
          properties:
            items:
              type: array
              items: { $ref: '#/components/schemas/EventDto' }

    # ---------------- Memos ----------------
    MemoDto:
      type: object
      required: [id, eventId, content, createdAt, updatedAt]
      properties:
        id: { type: integer, format: int64 }
        eventId: { type: integer, format: int64 }
        content: { type: string }
        tags:
          type: array
          items: { $ref: '#/components/schemas/TagDto' }
        createdAt: { type: string, format: date-time }
        updatedAt: { type: string, format: date-time }

    CreateMemoRequest:
      type: object
      required: [eventId, content]
      properties:
        eventId: { type: integer, format: int64 }
        content: { type: string, minLength: 1 }
        tagIds:
          type: array
          items: { type: integer, format: int64 }
          nullable: true

    CreateMemoResponse:
      type: object
      required: [id]
      properties:
        id: { type: integer, format: int64 }

    UpdateMemoRequest:
      type: object
      properties:
        content: { type: string, nullable: true }
        tagIds:
          type: array
          items: { type: integer, format: int64 }
          nullable: true
      description: "content/tagIds 중 하나 이상 변경"

    UpdateMemoResponse:
      type: object
      required: [id]
      properties:
        id: { type: integer, format: int64 }

    ListMemoResponse:
      type: object
      required: [items]
      properties:
        items:
          type: array
          items: { $ref: '#/components/schemas/MemoDto' }

    # ---------------- Tags ----------------
    TagDto:
      type: object
      required: [id, name]
      properties:
        id: { type: integer, format: int64 }
        name: { type: string }

    CreateTagRequest:
      type: object
      required: [name]
      properties:
        name: { type: string, minLength: 1 }

    CreateTagResponse:
      type: object
      required: [id]
      properties:
        id: { type: integer, format: int64 }

    UpdateTagRequest:
      type: object
      required: [name]
      properties:
        name: { type: string, minLength: 1 }

    UpdateTagResponse:
      type: object
      required: [id, name]
      properties:
        id: { type: integer, format: int64 }
        name: { type: string }

    ListTagResponse:
      type: object
      required: [items]
      properties:
        items:
          type: array
          items: { $ref: '#/components/schemas/TagDto' }

    # ---------------- Timetables / Courses ----------------
    CreateTimetableRequest:
      type: object
      required: [name, year, semester]
      properties:
        name: { type: string }
        year: { type: integer }
        semester:
          type: string
          enum: [SPRING, SUMMER, FALL, WINTER]

    UpdateTimetableRequest:
      type: object
      required: [name]
      properties:
        name: { type: string }

    TimetableResponse:
      type: object
      required: [id, name, year, semester]
      properties:
        id: { type: integer, format: int64 }
        name: { type: string }
        year: { type: integer }
        semester:
          type: string
          enum: [SPRING, SUMMER, FALL, WINTER]

    AddCourseResponse:
      type: object
      required: [timetableCourseId]
      properties:
        timetableCourseId: { type: integer, format: int64 }

    CourseDto:
      type: object
      required: [id, year, semester, courseNumber, lectureNumber, courseTitle, startAt, endAt, credit]
      properties:
        id: { type: integer, format: int64 }
        year: { type: integer }
        semester:
          type: string
          enum: [SPRING, SUMMER, FALL, WINTER]
        courseNumber: { type: string }
        lectureNumber: { type: string }
        courseTitle: { type: string }
        startAt:
          type: integer
          format: int64
          description: "DB 타입이 bigint라면 '분/초 epoch' 등 규칙을 확정해서 맞추기"
        endAt:
          type: integer
          format: int64
        credit: { type: integer, format: int64 }
        instructor: { type: string, nullable: true }

    CourseSearchResponse:
      type: object
      required: [items]
      properties:
        items:
          type: array
          items: { $ref: '#/components/schemas/CourseDto' }

paths:
  # ---------------- Auth ----------------
  /auth/register:
    post:
      tags: [Auth]
      summary: Local 회원가입
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/RegisterRequest' }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/RegisterResponse' }
        "409":
          description: Conflict (이미 가입된 이메일 등)
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ErrorResponse' }

  /auth/login:
    post:
      tags: [Auth]
      summary: Local 로그인
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/LoginRequest' }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/LoginResponse' }
        "401":
          description: Unauthorized
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ErrorResponse' }

  /auth/social:
    post:
      tags: [Auth]
      summary: 소셜 로그인/가입
      description: |
        정책 예시:
        - 동일 이메일로 LOCAL 계정이 이미 있으면 409로 내려서 "로컬 로그인 유도" 가능
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/SocialRegisterRequest' }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/LoginResponse' }
        "409":
          description: Conflict (동일 이메일의 LOCAL 계정 존재 → 로컬 로그인 유도)
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ErrorResponse' }

  /auth/logout:
    post:
      tags: [Auth]
      summary: 로그아웃
      security: [{ bearerAuth: [] }]
      responses:
        "204": { description: No Content }

  # ---------------- Users ----------------
  /users/me:
    get:
      tags: [Users]
      summary: 내 정보 조회
      security: [{ bearerAuth: [] }]
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/GetMeResponse' }

  # ---------------- Categories ----------------
  /category-groups/with-categories:
    get:
      tags: [Categories]
      summary: 카테고리 그룹 + 카테고리 목록
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/CategoryResponse' }

  # ---------------- Preference ----------------
  /users/me/excluded-keywords:
    get:
      tags: [Preference]
      summary: 제외 키워드 목록
      security: [{ bearerAuth: [] }]
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ListExcludedKeywordResponse' }
    post:
      tags: [Preference]
      summary: 제외 키워드 추가
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/AddExcludedKeywordRequest' }
      responses:
        "201": { description: Created }

  /users/me/interest-categories:
    get:
      tags: [Preference]
      summary: 관심 카테고리 목록
      security: [{ bearerAuth: [] }]
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ListInterestCategoryResponse' }
    post:
      tags: [Preference]
      summary: 관심 카테고리 추가
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/AddInterestCategoryRequest' }
      responses:
        "201": { description: Created }

  /users/me/interest-categories/{categoryId}:
    patch:
      tags: [Preference]
      summary: 관심 카테고리 우선순위 수정(옵션)
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: categoryId
          required: true
          schema: { type: integer, format: int64 }
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/UpdateInterestCategoryRequest' }
      responses:
        "200": { description: OK }
    delete:
      tags: [Preference]
      summary: 관심 카테고리 삭제
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: categoryId
          required: true
          schema: { type: integer, format: int64 }
      responses:
        "204": { description: No Content }

  # ---------------- Events ----------------
  /events/month:
    get:
      tags: [Events]
      summary: 월별 캘린더 조회
      description: |
        - excluded keyword: title에 포함되면 서버에서 결과에서 제외
        - interest category: 정렬(RECOMMENDED) 또는 isInterested/priorityScore로 반영 가능
      security: [{ bearerAuth: [] }]
      parameters:
        - in: query
          name: from
          required: true
          schema: { type: string, format: date }
        - in: query
          name: to
          required: true
          schema: { type: string, format: date }
        - in: query
          name: statusId
          schema: { type: integer, format: int64 }
        - in: query
          name: eventTypeId
          schema: { type: integer, format: int64 }
        - in: query
          name: orgId
          schema: { type: integer, format: int64 }
        - in: query
          name: q
          schema: { type: string }
        - in: query
          name: usePreferences
          schema: { type: boolean, default: true }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/MonthEventResponse' }

  /events/day:
    get:
      tags: [Events]
      summary: 일별 이벤트 조회(페이지네이션)
      security: [{ bearerAuth: [] }]
      parameters:
        - in: query
          name: date
          required: true
          schema: { type: string, format: date }
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: size
          schema: { type: integer, default: 20 }
        - in: query
          name: statusId
          schema: { type: integer, format: int64 }
        - in: query
          name: eventTypeId
          schema: { type: integer, format: int64 }
        - in: query
          name: orgId
          schema: { type: integer, format: int64 }
        - in: query
          name: q
          schema: { type: string }
        - in: query
          name: usePreferences
          schema: { type: boolean, default: true }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/DayEventResponse' }

  /events:
    post:
      tags: [Events]
      summary: 이벤트 목록 조회(필터를 request body로)
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/EventFilterRequest' }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ListEventResponse' }

  /events/{eventId}:
    get:
      tags: [Events]
      summary: 이벤트 상세 조회
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: eventId
          required: true
          schema: { type: integer, format: int64 }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/DetailEventResponse' }
        "404":
          description: Not Found
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ErrorResponse' }

  # ---------------- Bookmarks ----------------
  /events/{eventId}/bookmark:
    post:
      tags: [Bookmarks]
      summary: 북마크 추가
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: eventId
          required: true
          schema: { type: integer, format: int64 }
      responses:
        "204": { description: No Content }
    delete:
      tags: [Bookmarks]
      summary: 북마크 취소
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: eventId
          required: true
          schema: { type: integer, format: int64 }
      responses:
        "204": { description: No Content }

  /users/me/bookmarks:
    get:
      tags: [Bookmarks]
      summary: 북마크한 이벤트 목록
      security: [{ bearerAuth: [] }]
      parameters:
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: size
          schema: { type: integer, default: 20 }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/BookmarkedEventResponse' }

  # ---------------- Memos ----------------
  /memos:
    get:
      tags: [Memos]
      summary: 내 메모 목록
      security: [{ bearerAuth: [] }]
      parameters:
        - in: query
          name: eventId
          schema: { type: integer, format: int64 }
          description: "특정 이벤트의 메모만 보고 싶으면"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ListMemoResponse' }
    post:
      tags: [Memos]
      summary: 메모 생성
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/CreateMemoRequest' }
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema: { $ref: '#/components/schemas/CreateMemoResponse' }

  /memos/{memoId}:
    patch:
      tags: [Memos]
      summary: 메모 수정
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: memoId
          required: true
          schema: { type: integer, format: int64 }
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/UpdateMemoRequest' }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/UpdateMemoResponse' }
    delete:
      tags: [Memos]
      summary: 메모 삭제
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: memoId
          required: true
          schema: { type: integer, format: int64 }
      responses:
        "204": { description: No Content }

  # ---------------- Tags ----------------
  /tags:
    get:
      tags: [Tags]
      summary: 태그 목록
      parameters:
        - in: query
          name: q
          schema: { type: string }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ListTagResponse' }
    post:
      tags: [Tags]
      summary: 태그 생성
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/CreateTagRequest' }
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema: { $ref: '#/components/schemas/CreateTagResponse' }

  /tags/{tagId}:
    patch:
      tags: [Tags]
      summary: 태그 수정
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: tagId
          required: true
          schema: { type: integer, format: int64 }
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/UpdateTagRequest' }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/UpdateTagResponse' }
    delete:
      tags: [Tags]
      summary: 태그 삭제
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: tagId
          required: true
          schema: { type: integer, format: int64 }
      responses:
        "204": { description: No Content }

  # ---------------- Timetables ----------------
  /timetables:
    get:
      tags: [Timetables]
      summary: 내 시간표 목록
      security: [{ bearerAuth: [] }]
      parameters:
        - in: query
          name: year
          schema: { type: integer }
        - in: query
          name: semester
          schema:
            type: string
            enum: [SPRING, SUMMER, FALL, WINTER]
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/TimetableResponse' }

    post:
      tags: [Timetables]
      summary: 시간표 생성
      security: [{ bearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/CreateTimetableRequest' }
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema: { $ref: '#/components/schemas/TimetableResponse' }

  /timetables/{timetableId}:
    patch:
      tags: [Timetables]
      summary: 시간표 이름 수정
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: timetableId
          required: true
          schema: { type: integer, format: int64 }
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/UpdateTimetableRequest' }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/TimetableResponse' }

    delete:
      tags: [Timetables]
      summary: 시간표 삭제
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: timetableId
          required: true
          schema: { type: integer, format: int64 }
      responses:
        "204": { description: No Content }

  /timetables/{timetableId}/courses:
    post:
      tags: [Timetables]
      summary: 시간표에 강의 추가
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: timetableId
          required: true
          schema: { type: integer, format: int64 }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [courseId]
              properties:
                courseId: { type: integer, format: int64 }
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema: { $ref: '#/components/schemas/AddCourseResponse' }

  /timetables/{timetableId}/courses/{timetableCourseId}:
    delete:
      tags: [Timetables]
      summary: 시간표에서 강의 제거
      security: [{ bearerAuth: [] }]
      parameters:
        - in: path
          name: timetableId
          required: true
          schema: { type: integer, format: int64 }
        - in: path
          name: timetableCourseId
          required: true
          schema: { type: integer, format: int64 }
      responses:
        "204": { description: No Content }

  # ---------------- Courses ----------------
  /courses/search:
    get:
      tags: [Courses]
      summary: 강의 검색
      parameters:
        - in: query
          name: year
          schema: { type: integer }
        - in: query
          name: semester
          schema:
            type: string
            enum: [SPRING, SUMMER, FALL, WINTER]
        - in: query
          name: q
          schema: { type: string }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/CourseSearchResponse' }

  # ---------------- Health ----------------
  /health:
    get:
      summary: Health check
      responses:
        "200": { description: OK }